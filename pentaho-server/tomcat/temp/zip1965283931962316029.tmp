{"components":{"rows":[{"id":"OTHERCOMPONENTS","name":"Others","parent":"UnIqEiD","properties":[{"name":"Group","type":"Label","value":"Others"}],"type":"Label","typeDesc":"\u003Ci\u003EGroup\u003C/i\u003E"},{"id":"49ebef0c-93cd-6113-a754-644a2c1b25df","parent":"OTHERCOMPONENTS","properties":[{"name":"name","type":"Id","value":"main_table"},{"name":"bigExport","type":"BigExportCustom","value":"Dynamic"},{"name":"expandContainerObject","type":"String","value":"rpo_list_table"},{"name":"listeners","type":"Listeners","value":"[\u0022${p:submit_main_table}\u0022]"},{"name":"oLanguage","type":"JavaScript","value":""},{"name":"language","type":"JavaScript","value":""},{"name":"colFormats","type":"Array","value":"[null,null,null,null,\u0022%.d\u0022,\u0022%.d\u0022,\u0022%.d\u0022]"},{"name":"colHeaders","type":"Array","value":"[]"},{"name":"colSortable","type":"Array","value":"[]"},{"name":"colTypes","type":"colTypesCustom","value":"[\u0022string\u0022,\u0022string\u0022,\u0022string\u0022,\u0022string\u0022,\u0022numeric\u0022,\u0022numeric\u0022,\u0022numeric\u0022]"},{"name":"colWidths","type":"Array","value":"[]"},{"name":"expandParameters","type":"ValuesArray","value":"[]"},{"name":"parameters","type":"ValuesArray","value":"[[\u0022fps\u0022,\u0022fps\u0022],[\u0022mail_type\u0022,\u0022mail_type\u0022]]"},{"name":"displayLength","type":"Integer","value":"50"},{"name":"expandCell","type":"Boolean","value":"true"},{"name":"expandOnClick","type":"Boolean","value":"true"},{"name":"filter","type":"Boolean","value":"false"},{"name":"info","type":"Boolean","value":"true"},{"name":"lengthChange","type":"Boolean","value":"true"},{"name":"paginate","type":"Boolean","value":"true"},{"name":"sort","type":"Boolean","value":"true"},{"name":"colSearchable","type":"Array","value":"[]"},{"name":"drawCallback","type":"JavaScript","value":""},{"name":"dataSource","type":"Datasource","value":"main_ds"},{"name":"sDom","type":"JavaScript","value":""},{"name":"sortBy","type":"SortByArray","value":"[]"},{"name":"priority","type":"Integer","value":5},{"name":"refreshPeriod","type":"Integer","value":""},{"name":"paginationType","type":"PaginationType","value":"simple_numbers"},{"name":"tableStyle","type":"TableStyle","value":"themeroller"},{"name":"htmlObject","type":"HtmlObject","value":"${h:panel_report}"},{"name":"executeAtStart","type":"Boolean","value":"false"},{"name":"paginateServerside","type":"Boolean","value":"true"},{"name":"failureCallback","type":"JavaScript","value":""},{"name":"preExecution","type":"JavaScript","value":""},{"name":"postExecution","type":"JavaScript","value":""},{"name":"postFetch","type":"JavaScript","value":""},{"name":"preChange","type":"JavaScript","value":""},{"name":"postChange","type":"JavaScript","value":""},{"name":"preExpand","type":"JavaScript","value":"function submit(scene) {\r\n  var column = {\r\n    \u0027План: в День прогноза +1д\u0027: 1,\r\n    \u0027План: в День прогноза +2д\u0027: 2,\r\n    \u0027План: в День прогноза +3д\u0027: 3\r\n  }[scene.category];\r\n  \r\n  return (column !== undefined);\r\n} "},{"name":"extraOptions","type":"OptionArray","value":"[]"},{"name":"tooltip","type":"Html","value":""},{"name":"clickAction","type":"JavaScript","value":"function submit(scene) {\r\n  if (!scene.cellExpanded) {\r\n      return;\r\n  }\r\n  var day = {\r\n    \u0027План: в День прогноза +1д\u0027: 1,\r\n    \u0027План: в День прогноза +2д\u0027: 2,\r\n    \u0027План: в День прогноза +3д\u0027: 3\r\n  }[scene.category];\r\n  \r\n  if (day !== undefined) {\r\n    Dashboards.fireChange(\u0027selected_index_oper\u0027, scene.rawData.resultset[scene.rowIdx][2]);\r\n    Dashboards.fireChange(\u0027selected_mail_type\u0027, scene.rawData.resultset[scene.rowIdx][3]);\r\n    Dashboards.fireChange(\u0027day_number\u0027, day);\r\n    Dashboards.fireChange(\u0027forecast_date\u0027, scene.rawData.resultset[scene.rowIdx][0]);\r\n    \r\n    Dashboards.fireChange(\u0027submit_rpo_list_table\u0027, \u0027true\u0027);\r\n  }\r\n} "}],"type":"ComponentsTable","typeDesc":"Table Component"},{"id":"bdf0290a-bdcb-58b3-c9d3-628704550981","parent":"OTHERCOMPONENTS","properties":[{"name":"name","type":"Id","value":"rpo_list_table"},{"name":"bigExport","type":"BigExportCustom","value":"Dynamic"},{"name":"expandContainerObject","type":"String","value":""},{"name":"listeners","type":"Listeners","value":"[\u0022${p:submit_rpo_list_table}\u0022]"},{"name":"oLanguage","type":"JavaScript","value":""},{"name":"language","type":"JavaScript","value":""},{"name":"colFormats","type":"Array","value":"[]"},{"name":"colHeaders","type":"Array","value":"[]"},{"name":"colSortable","type":"Array","value":"[]"},{"name":"colTypes","type":"colTypesCustom","value":"[]"},{"name":"colWidths","type":"Array","value":"[]"},{"name":"expandParameters","type":"ValuesArray","value":"[]"},{"name":"parameters","type":"ValuesArray","value":"[[\u0022selected_index_oper\u0022,\u0022selected_index_oper\u0022],[\u0022selected_mail_type\u0022,\u0022selected_mail_type\u0022],[\u0022day_number\u0022,\u0022day_number\u0022],[\u0022forecast_date\u0022,\u0022forecast_date\u0022]]"},{"name":"displayLength","type":"Integer","value":"50"},{"name":"expandCell","type":"Boolean","value":"false"},{"name":"expandOnClick","type":"Boolean","value":"false"},{"name":"filter","type":"Boolean","value":"false"},{"name":"info","type":"Boolean","value":"true"},{"name":"lengthChange","type":"Boolean","value":"true"},{"name":"paginate","type":"Boolean","value":"true"},{"name":"sort","type":"Boolean","value":"true"},{"name":"colSearchable","type":"Array","value":"[]"},{"name":"drawCallback","type":"JavaScript","value":""},{"name":"dataSource","type":"Datasource","value":"rpo_list_ds"},{"name":"sDom","type":"JavaScript","value":""},{"name":"sortBy","type":"SortByArray","value":"[]"},{"name":"priority","type":"Integer","value":5},{"name":"refreshPeriod","type":"Integer","value":""},{"name":"paginationType","type":"PaginationType","value":"simple_numbers"},{"name":"tableStyle","type":"TableStyle","value":"themeroller"},{"name":"htmlObject","type":"HtmlObject","value":"${h:rpo_list_table}"},{"name":"executeAtStart","type":"Boolean","value":"false"},{"name":"paginateServerside","type":"Boolean","value":"true"},{"name":"failureCallback","type":"JavaScript","value":""},{"name":"preExecution","type":"JavaScript","value":""},{"name":"postExecution","type":"JavaScript","value":""},{"name":"postFetch","type":"JavaScript","value":""},{"name":"preChange","type":"JavaScript","value":""},{"name":"postChange","type":"JavaScript","value":""},{"name":"preExpand","type":"JavaScript","value":""},{"name":"extraOptions","type":"OptionArray","value":"[]"},{"name":"tooltip","type":"Html","value":""},{"name":"clickAction","type":"JavaScript","value":""}],"type":"ComponentsTable","typeDesc":"Table Component"},{"id":"bc242b19-cb85-dddf-5dc2-24edd514d06b","parent":"OTHERCOMPONENTS","properties":[{"name":"name","type":"Id","value":"submit_main_table_button"},{"name":"label","type":"String","value":"Обновить"},{"name":"listeners","type":"Listeners","value":"[]"},{"name":"actionParameters","type":"ValuesArray","value":"[]"},{"name":"expression","type":"JavaScript","value":"function() {\n  Dashboards.fireChange(\u0027submit_main_table\u0027, \u0027submit_main_table\u0027);\n} "},{"name":"failureCallback","type":"JavaScript","value":""},{"name":"successCallback","type":"JavaScript","value":""},{"name":"dataSource","type":"Datasource","value":""},{"name":"priority","type":"Integer","value":5},{"name":"refreshPeriod","type":"Integer","value":""},{"name":"buttonStyle","type":"TableStyle","value":"themeroller"},{"name":"htmlObject","type":"HtmlObject","value":"${h:submit_main_table_button}"},{"name":"executeAtStart","type":"Boolean","value":"true"},{"name":"preExecution","type":"JavaScript","value":""},{"name":"postExecution","type":"JavaScript","value":""},{"name":"tooltip","type":"Html","value":""}],"type":"ComponentsbuttonComponent","typeDesc":"Button Component"},{"id":"SELECTORS","name":"Selects","parent":"UnIqEiD","properties":[{"name":"Group","type":"Label","value":"Selects"}],"type":"Label","typeDesc":"\u003Ci\u003EGroup\u003C/i\u003E"},{"id":"4233c656-b93c-cda1-b20c-d8141bfaf744","parent":"SELECTORS","properties":[{"name":"name","type":"Id","value":"fps_filter"},{"name":"title","type":"String","value":"ОПС"},{"name":"parameter","type":"Parameter","value":"${p:fps}"},{"name":"listeners","type":"Listeners","value":"[]"},{"name":"catalog","type":"MondrianCatalog","value":"mondrian:/next_days_forecast_for_existing_rpo_mondrian_schema"},{"name":"cube","type":"String","value":"next_days_forecast_for_existing_rpo"},{"name":"dimensionName","type":"String","value":"fps"},{"name":"multiSelect","type":"Boolean","value":true},{"name":"pageSize","type":"Integer","value":14},{"name":"parameters","type":"ValuesArray","value":"[]"},{"name":"priority","type":"Integer","value":5},{"name":"htmlObject","type":"HtmlObject","value":"fps_filter"},{"name":"executeAtStart","type":"Boolean","value":"true"},{"name":"preExecution","type":"JavaScript","value":""},{"name":"postExecution","type":"JavaScript","value":""},{"name":"postFetch","type":"JavaScript","value":""},{"name":"preChange","type":"JavaScript","value":""},{"name":"postChange","type":"JavaScript","value":"function(data){\n    fps = filterOlapData(data);\n} "},{"name":"tooltip","type":"Html","value":""}],"type":"ComponentsolapSelector","typeDesc":"Olap Selector"},{"id":"2de39c7b-7c75-63a3-3b28-2e2b993ef271","parent":"SELECTORS","properties":[{"name":"name","type":"Id","value":"mail_type_filter"},{"name":"title","type":"String","value":"Тип РПО"},{"name":"parameter","type":"Parameter","value":"${p:mail_type}"},{"name":"listeners","type":"Listeners","value":"[]"},{"name":"catalog","type":"MondrianCatalog","value":"mondrian:/next_days_forecast_for_existing_rpo_mondrian_schema"},{"name":"cube","type":"String","value":"next_days_forecast_for_existing_rpo"},{"name":"dimensionName","type":"String","value":"mail_type"},{"name":"multiSelect","type":"Boolean","value":true},{"name":"pageSize","type":"Integer","value":14},{"name":"parameters","type":"ValuesArray","value":"[]"},{"name":"priority","type":"Integer","value":5},{"name":"htmlObject","type":"HtmlObject","value":"${h:mail_type_filter}"},{"name":"executeAtStart","type":"Boolean","value":"true"},{"name":"preExecution","type":"JavaScript","value":""},{"name":"postExecution","type":"JavaScript","value":""},{"name":"postFetch","type":"JavaScript","value":""},{"name":"preChange","type":"JavaScript","value":""},{"name":"postChange","type":"JavaScript","value":"function(data){\r\n    mail_type = filterOlapData(data);\r\n} "},{"name":"tooltip","type":"Html","value":""}],"type":"ComponentsolapSelector","typeDesc":"Olap Selector"},{"id":"PARAMETERS","name":"Parameters","parent":"UnIqEiD","properties":[{"name":"Group","type":"Label","value":"Parameters"}],"type":"Label","typeDesc":"\u003Ci\u003EGroup\u003C/i\u003E"},{"id":"927069a0-1236-97ed-422e-2c851573355c","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"submit_main_table"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"ecaadb14-2fdc-28e9-68cf-95c7eec0e417","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"submit_rpo_list_table"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"b8f0005a-f795-3af0-263d-dca4283e814c","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"fps"},{"name":"propertyValue","type":"String","value":"fps"},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"bdfafbf8-15ed-33c5-fd38-4fb7d6f0dfaa","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"mail_type"},{"name":"propertyValue","type":"String","value":"mail_type"},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"b668243d-5faa-1c97-4ae6-d217ce279dec","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"selected_index_oper"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"f51ec04e-d712-7206-5046-6691002d5237","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"selected_mail_type"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"2e40050d-36a3-9e20-44e2-d009a7cf05f3","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"day_number"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"},{"id":"607b9d8f-4e94-bb03-b7af-9ea69ac4123c","parent":"PARAMETERS","properties":[{"name":"name","type":"Id","value":"forecast_date"},{"name":"propertyValue","type":"String","value":""},{"name":"parameterViewRole","type":"parameterViewRoleCustom","value":"unused"},{"name":"bookmarkable","type":"Boolean","value":"false"},{"name":"public","type":"Boolean","value":"false"}],"rowName":"Simple Parameter","type":"ComponentsParameter","typeDesc":"Simple parameter"}]},"datasources":{"rows":[{"id":"SQL","name":"SQL Queries","parent":"UnIqEiD","properties":[{"name":"Group","type":"Label","value":"SQL Queries"}],"type":"Label","typeDesc":"\u003Ci\u003EGroup\u003C/i\u003E"},{"id":"f3689cbf-45cd-445e-99eb-7bd3d15a9cf1","meta":"CDA","meta_conntype":"sql.jndi","meta_datype":"sql","parent":"SQL","properties":[{"name":"name","type":"Id","value":"main_ds"},{"name":"access","type":"Access","value":"public"},{"name":"jndi","type":"Jndi","value":"vertica"},{"name":"query","type":"SqlQuery","value":"select \r\n    actual.forecast_date as \u0027День составления прогноза\u0027, \r\n\tdim_fps.post_object as \u0027Объект\u0027,\r\n\tactual.index_oper as \u0027Индекс\u0027,\r\n\tmt.name as \u0027Вид отправлений\u0027,\r\n\tactual.d1 as \u0027План: в День прогноза +1д\u0027, \r\n\tactual.d2 as \u0027План: в День прогноза +2д\u0027, \r\n\tactual.d3 as \u0027План: в День прогноза +3д\u0027, \r\n\t\u0027д1: \u0027 || prev_1.d1 || \u0027, д2: \u0027 ||  prev_1.d2 || \u0027, д3: \u0027 || prev_1.d3 as \u0027Прогноз составленный 1 день назад\u0027,\r\n\t\u0027д1: \u0027 || prev_2.d1 || \u0027, д2: \u0027 ||  prev_2.d2 || \u0027, д3: \u0027 || prev_2.d3 as \u0027Прогноз составленный 2 дня назад\u0027,\r\n\t\u0027д1: \u0027 || prev_3.d1 || \u0027, д2: \u0027 ||  prev_3.d2 || \u0027, д3: \u0027 || prev_3.d3 as \u0027Прогноз составленный 3 дня назад\u0027,\r\n\t\u0027д1: \u0027 || prev_4.d1 || \u0027, д2: \u0027 ||  prev_4.d2 || \u0027, д3: \u0027 || prev_4.d3 as \u0027Прогноз составленный 4 дня назад\u0027,\r\n\t\u0027д1: \u0027 || prev_5.d1 || \u0027, д2: \u0027 ||  prev_5.d2 || \u0027, д3: \u0027 || prev_5.d3 as \u0027Прогноз составленный 5 дней назад\u0027\r\nfrom tracking.next_days_forecast_for_existing_rpo actual\r\nleft join dicts.dim_fps_structure dim_fps on actual.index_oper = dim_fps.post_object_index\r\nleft join dicts.mail_type_groups mt on actual.mail_type = mt.code\r\nleft join tracking.next_days_forecast_for_existing_rpo prev_1 on actual.index_oper = prev_1.index_oper and actual.mail_type = prev_1.mail_type and prev_1.forecast_date = LEFT(TO_CHAR(TIMESTAMPADD(DAY, -1, TO_DATE(actual.forecast_date, \u0027yyyy-MM-dd\u0027))), 10)\r\nleft join tracking.next_days_forecast_for_existing_rpo prev_2 on actual.index_oper = prev_2.index_oper and actual.mail_type = prev_2.mail_type and prev_2.forecast_date = LEFT(TO_CHAR(TIMESTAMPADD(DAY, -2, TO_DATE(actual.forecast_date, \u0027yyyy-MM-dd\u0027))), 10)\r\nleft join tracking.next_days_forecast_for_existing_rpo prev_3 on actual.index_oper = prev_3.index_oper and actual.mail_type = prev_3.mail_type and prev_3.forecast_date = LEFT(TO_CHAR(TIMESTAMPADD(DAY, -3, TO_DATE(actual.forecast_date, \u0027yyyy-MM-dd\u0027))), 10)\r\nleft join tracking.next_days_forecast_for_existing_rpo prev_4 on actual.index_oper = prev_4.index_oper and actual.mail_type = prev_4.mail_type and prev_4.forecast_date = LEFT(TO_CHAR(TIMESTAMPADD(DAY, -4, TO_DATE(actual.forecast_date, \u0027yyyy-MM-dd\u0027))), 10)\r\nleft join tracking.next_days_forecast_for_existing_rpo prev_5 on actual.index_oper = prev_5.index_oper and actual.mail_type = prev_5.mail_type and prev_5.forecast_date = LEFT(TO_CHAR(TIMESTAMPADD(DAY, -5, TO_DATE(actual.forecast_date, \u0027yyyy-MM-dd\u0027))), 10)\r\nwhere actual.forecast_date = (select max(forecast_date) from tracking.next_days_forecast_for_existing_rpo)\r\n\tand (\u0027\u0027 in (${fps}) or \u0027fps\u0027 in (${fps})\r\n\t\tor \u0027[fps].[\u0027 || dim_fps.macroregion || \u0027]\u0027 in (${fps})\r\n\t\tor \u0027[fps].[\u0027 || dim_fps.macroregion || \u0027].[\u0027 || dim_fps.ufps || \u0027]\u0027 in (${fps})\r\n\t\tor \u0027[fps].[\u0027 || dim_fps.macroregion || \u0027].[\u0027 || dim_fps.ufps || \u0027].[\u0027 || dim_fps.post_office || \u0027]\u0027 in (${fps})\r\n\t\tor \u0027[fps].[\u0027 || dim_fps.macroregion || \u0027].[\u0027 || dim_fps.ufps || \u0027].[\u0027 || dim_fps.post_office || \u0027].[\u0027 || dim_fps.post_object || \u0027]\u0027 in (${fps}))\r\n\tand (\u0027\u0027 in (${mail_type}) or \u0027mail_type\u0027 in (${mail_type})\r\n\t\tor \u0027[mail_type].[\u0027 || mt.group || \u0027]\u0027 in (${mail_type})\r\n\t\tor \u0027[mail_type].[\u0027 || mt.group || \u0027].[\u0027 || mt.name || \u0027]\u0027 in (${mail_type}))"},{"name":"parameters","type":"CdaParameters","value":"[[\u0022fps\u0022,\u0022fps\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022],[\u0022mail_type\u0022,\u0022mail_type\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022]]"},{"name":"cdacalculatedcolumns","type":"CdaCalculatedColumnsArray","value":"[]"},{"name":"cdacolumns","type":"CdaColumnsArray","value":"[]"},{"name":"output","type":"IndexArray","value":"[]"},{"name":"outputMode","type":"OutputMode","value":"include"},{"name":"cacheKeys","type":"CacheKeysValues","value":"[]"},{"name":"cacheDuration","type":"Integer","value":3600},{"name":"cache","type":"Boolean","value":"true"}],"type":"Componentssql_sqlJndi","typeDesc":"sql over sqlJndi"},{"id":"336b2063-6307-c047-6392-79e6e0642e93","meta":"CDA","meta_conntype":"sql.jndi","meta_datype":"sql","parent":"SQL","properties":[{"name":"name","type":"Id","value":"rpo_list_ds"},{"name":"access","type":"Access","value":"public"},{"name":"jndi","type":"Jndi","value":"vertica"},{"name":"query","type":"SqlQuery","value":"select \r\n    bar_code, \r\n\tmt.name as \u0027Вид отправлений\u0027, \r\n\tindex_oper as \u0027Индекс\u0027, \r\n\toper_date_time_local as \u0027Время поступления\u0027, \r\n\tindex_from as \u0027Откуда (индекс)\u0027, \r\n\tindex_to as \u0027Куда (индекс)\u0027\r\nfrom tracking.rpo_tracing_forecast f\r\nleft join dicts.mail_type_groups mt on f.mail_type = mt.code\r\nwhere \r\n\tindex_oper = ${selected_index_oper} \r\n\tand (mt.name = ${selected_mail_type} or (mt.name is null and ${selected_mail_type} = \u0027\u0027))\r\n\tand oper_type = 8\r\n\tand LEFT(oper_date_time_local, 10) = LEFT(TO_CHAR(TIMESTAMPADD(DAY, ${day_number}, TO_DATE(${forecast_date}, \u0027yyyy-MM-dd\u0027))), 10)"},{"name":"parameters","type":"CdaParameters","value":"[[\u0022selected_index_oper\u0022,\u0022selected_index_oper\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022],[\u0022selected_mail_type\u0022,\u0022selected_mail_type\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022],[\u0022day_number\u0022,\u0022day_number\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022],[\u0022forecast_date\u0022,\u0022forecast_date\u0022,\u0022String\u0022,\u0022\u0022,\u0022\u0022]]"},{"name":"cdacalculatedcolumns","type":"CdaCalculatedColumnsArray","value":"[]"},{"name":"cdacolumns","type":"CdaColumnsArray","value":"[]"},{"name":"output","type":"IndexArray","value":"[]"},{"name":"outputMode","type":"OutputMode","value":"include"},{"name":"cacheKeys","type":"CacheKeysValues","value":"[]"},{"name":"cacheDuration","type":"Integer","value":3600},{"name":"cache","type":"Boolean","value":"true"}],"type":"Componentssql_sqlJndi","typeDesc":"sql over sqlJndi"}]},"filename":"/home/skotlov/Прогноз+поступлений+существующих+РПО.cdfde","layout":{"rows":[{"id":"753f3b01-1c95-3616-a2ae-7ffd9861de33","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":""},{"name":"resourceCode","type":"Resource","value":"// init default values\nvar date = new Date();\nvar tzoffset = date.getTimezoneOffset() * 60000;\nvar day = date.getDate();\nvar month = date.getMonth(); // months from 0-11\nvar year = date.getFullYear();\nvar iii = 0;\n\nfunction formatDate(date) {\n\treturn (new Date(date - tzoffset)).toISOString().slice(0, 10);\n}\n\nfunction filterOlapData(data){\n    var rez = new Array();\n    for(var i = 0; i \u003C data.length; i++){\n        var add = true;\n        for (var j = (i+1); j \u003C data.length; j++) {\n          if(data[j].indexOf(data[i]) == 0){\n              add = false;\n              break;\n          }\n        }\n        if(add){\n          rez.push(data[i]);\n        }  \n    }\n    return rez;\n}\n\nfunction parseRangeFilter(str) {\n    var single = \u0027\u0027;\n    var range = \u0027\u0027;\n\n    str.trim().split(\u0027;\u0027).forEach(function(item, i, arr) {\n      if (item.length \u003E 0){\n        if (item.indexOf(\u0027-\u0027) \u003E -1) {\n          var it = item.split(\u0027-\u0027);\n          range += it[0] + \u0027;\u0027 + it[1] + \u0027;\u0027;\n        } else {\n          single += item + \u0027;\u0027;\n        }\n      }  \n    });\n\n    return [single, range];\n}\n\nfunction checkDateRangeFilters() {\n    var errorMessages = [];\n    function checkDateRangeFilter(name, id, filterFrom, filterTo) {\n        var date_from = new Date(Dashboards.getParameterValue(filterFrom));\n        var date_to = new Date(Dashboards.getParameterValue(filterTo));\n        if (date_from \u003E date_to) {\n            errorMessages.push(name + \u0027: \u0022Дата с\u0022 не может быть больше \u0022Даты по\u0022.\u0027);\n            $(id + \u0027 input\u0027).css(\u0027color\u0027, \u0027red\u0027);\n            $(id).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);\n        }\n    }\n    \n    checkDateRangeFilter(\u0027Отчётный период\u0027, \u0027#date_filter\u0027, \u0027date_from\u0027, \u0027date_to\u0027);\n    \n    if (errorMessages.length \u003E 0) {\n        alert(errorMessages.join(\u0022\\n\u0022));\n        return false;\n    }\n    \n    return true;\n}\n\nfunction toUTF8(str) {\n    return unescape(encodeURIComponent(str));\n}\n "},{"name":"resourceType","type":"Label","value":"Javascript"}],"type":"LayoutResourceCode","typeDesc":"Resource"},{"id":"1061ce6e-cbc5-a570-ee2f-5fb5df4d1b6a","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":""},{"name":"resourceCode","type":"Resource","value":".hidden {\n    display: none;\n}\n\n.container {\n    width: 97%;\n} \n\n.span-24 {\n    width: calc(97% - 180px);\n} \n\n.span-12 {\n    width: 48%;\n}\n\n.span-5 {\n    width: 180px;\n} \n\n.dateFilter {\n    width: calc(50% - 2px);\n    display: inline-block;\n}\n\n.dateFilter.singleDate \u003E div {\n    margin-left: 10px;\n}\n\n.tableComponent td.numeric {\n    font-family: inherit;\n}\n\n.olapSelectorComponent .optionList .rightArea .options {\n     -webkit-column-width: 400px;\n} \n\n\n.olapSelectorComponent .optionList .rightArea .item {\n  width:350px;\n} \n\n.olapSelectorComponent .item .name {\n    width:340px;\n}\n\ninput[type=\u0022text\u0022] {\n    width:180px;\n}\n\nselect {\n    width:180px;\n} \n\ntable .even{ background-color: #E4F0F8 !important; } \n\n.filter-separator {\n    border-bottom-style: solid;\n    border-bottom-width: 3px;\n    border-bottom-color: #5985B6;\n}\n\n.filter-group-title {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n}\n\n.wide-button {\n    margin-bottom: 5px;\n}\n\n.wide-button button {\n    width: 100%;\n}\n\ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column92, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column93, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column98, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column99, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column103, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column105, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column106, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column110 {\n    cursor:pointer;\n    color:#2779aa;\n}\n\ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column92:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column93:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column98:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column99:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column103:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column105:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column106:hover, \ndiv[drilldown_columns=\u0022cvpp_fact_table\u0022] .data-row .column110:hover {\n    text-decoration:underline;\n}\n "},{"name":"resourceType","type":"Label","value":"Css"}],"type":"LayoutResourceCode","typeDesc":"Resource"},{"id":"e12f9bf3-27f1-beb1-0a68-a5b0facd091b","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":"Header"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"5dc54aa4-6a22-269a-d641-ac5fd3a61298","parent":"e12f9bf3-27f1-beb1-0a68-a5b0facd091b","properties":[{"name":"name","type":"Id","value":""},{"name":"columnSpan","type":"Integer","value":"60"},{"name":"columnPrepend","type":"Integer","value":""},{"name":"columnAppend","type":"Integer","value":""},{"name":"columnPrependTop","type":"Boolean","value":false},{"name":"columnAppendBottom","type":"Boolean","value":false},{"name":"columnBorder","type":"Boolean","value":false},{"name":"columnBigBorder","type":"Boolean","value":false},{"name":"height","type":"Integer","value":"60"},{"name":"backgroundColor","type":"Color","value":"#5985b6"},{"name":"roundCorners","type":"RoundCorners","value":"cdfdd-round"},{"name":"textAlign","type":"TextAlign","value":"center"},{"name":"cssClass","type":"String","value":""}],"type":"LayoutColumn","typeDesc":"Column"},{"id":"53e4ccdd-bd66-1ee1-8b5a-5a8771703095","parent":"5dc54aa4-6a22-269a-d641-ac5fd3a61298","properties":[{"name":"name","type":"Id","value":"title"},{"name":"html","type":"Html","value":"\u003Ch2 style=\u0022color:#ffffff;\u0022\u003EПрогноз поступлений существующих РПО\u003C/h2\u003E "},{"name":"fontSize","type":"Integer","value":""},{"name":"color","type":"Color","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutHtml","typeDesc":"Html"},{"id":"cda9bf5f-0f51-13db-68ac-616cef3e73be","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":"Spacer"},{"name":"height","type":"Integer","value":"5"},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"9b5e4665-60dd-d123-d49a-7cb9072a0540","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":"Body"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"bd0bebb7-79a0-b57d-b000-13b265f96964","parent":"9b5e4665-60dd-d123-d49a-7cb9072a0540","properties":[{"name":"name","type":"Id","value":"panel_filters"},{"name":"columnSpan","type":"Integer","value":"5"},{"name":"columnPrepend","type":"Integer","value":""},{"name":"columnAppend","type":"Integer","value":""},{"name":"columnPrependTop","type":"Boolean","value":"false"},{"name":"columnAppendBottom","type":"Boolean","value":"false"},{"name":"columnBorder","type":"Boolean","value":"false"},{"name":"columnBigBorder","type":"Boolean","value":"false"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutColumn","typeDesc":"Column"},{"id":"d0af1b9f-3dba-c7f7-b056-7f73a11ea708","parent":"bd0bebb7-79a0-b57d-b000-13b265f96964","properties":[{"name":"name","type":"Id","value":"fps_filter"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"fb2da0a5-c19e-0ce5-d357-ba5f9c5e4ed1","parent":"bd0bebb7-79a0-b57d-b000-13b265f96964","properties":[{"name":"name","type":"Id","value":""},{"name":"height","type":"Integer","value":"15"},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"9170ce2e-c749-ef12-3b37-cf7ac6f03d49","parent":"bd0bebb7-79a0-b57d-b000-13b265f96964","properties":[{"name":"name","type":"Id","value":"mail_type_filter"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"2e29ba7f-1cc9-2776-cf93-4284e50db8a1","parent":"bd0bebb7-79a0-b57d-b000-13b265f96964","properties":[{"name":"name","type":"Id","value":""},{"name":"height","type":"Integer","value":"15"},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"3882c630-c639-1576-4614-2e2bd9442753","parent":"bd0bebb7-79a0-b57d-b000-13b265f96964","properties":[{"name":"name","type":"Id","value":"submit_main_table_button"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":"wide-button"}],"type":"LayoutRow","typeDesc":"Row"},{"id":"70ec60a7-437d-490d-b2e5-e7ed9c42d343","parent":"9b5e4665-60dd-d123-d49a-7cb9072a0540","properties":[{"name":"name","type":"Id","value":"panel_result"},{"name":"columnSpan","type":"Integer","value":"24"},{"name":"columnPrepend","type":"Integer","value":""},{"name":"columnAppend","type":"Integer","value":""},{"name":"columnPrependTop","type":"Boolean","value":"Flase"},{"name":"columnAppendBottom","type":"Boolean","value":"false"},{"name":"columnBorder","type":"Boolean","value":"false"},{"name":"columnBigBorder","type":"Boolean","value":"false"},{"name":"height","type":"Integer","value":"800"},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutColumn","typeDesc":"Column"},{"id":"c963515c-d1b8-46a9-204b-e1afadb00ae4","parent":"70ec60a7-437d-490d-b2e5-e7ed9c42d343","properties":[{"name":"name","type":"Id","value":"panel_report"},{"name":"height","type":"Integer","value":"800"},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"},{"id":"fc002ffc-02ce-b021-14f3-c2de212ca41b","parent":"UnIqEiD","properties":[{"name":"name","type":"Id","value":"rpo_list_table"},{"name":"height","type":"Integer","value":""},{"name":"backgroundColor","type":"Color","value":""},{"name":"roundCorners","type":"RoundCorners","value":""},{"name":"textAlign","type":"TextAlign","value":""},{"name":"cssClass","type":"String","value":""}],"type":"LayoutRow","typeDesc":"Row"}],"title":"post_template"}}